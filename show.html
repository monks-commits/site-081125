<!DOCTYPE html><html lang="uk">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Вистава — Ваш Адмін</title>
  <link rel="stylesheet" href="/styles.css"/>
  <style>.hero{display:grid;gap:12px}@media(min-width:900px){.hero{grid-template-columns:320px 1fr}}.hero img{width:100%;height:420px;object-fit:cover;border-radius:12px;background:#eee}</style>
</head>
<body>
<div id="site-header"></div>
<script type="module" src="/scripts/include.js"></script>

<main class="container">
  <div id="wrap" class="section"></div>
</main>

<div id="site-footer"></div>

<script>
  (function () {
    const params = new URLSearchParams(location.search);
    const slug = params.get('slug'); // наприклад: shevchenko/za-dvoma-zaytsiamy
    const target = document.getElementById('show-root') || document.querySelector('.show-root');

    if (!slug) {
      if (target) target.innerHTML = '<p>Не передано slug вистави.</p>';
      return;
    }

    const DATA_URL = `./data/shows/${slug}.json`;

    function $ (sel) { return document.querySelector(sel); }

    fetch(DATA_URL)
      .then(r => { if (!r.ok) throw new Error('Not found: ' + DATA_URL); return r.json(); })
      .then(d => {
        document.title = `${d.title} — Ваш Адмін`;
        const poster = d.poster ? `<img class="show-poster" src="${d.poster}" alt="${d.title}" loading="lazy">` : '';
        const meta = [
          d.genre, d.duration, d.director
        ].filter(Boolean).join(' • ');

        const html = `
          <section class="section">
            <h1>${d.title}</h1>
            <p class="meta">${meta}</p>
            <div class="show-layout">
              ${poster}
              <div class="show-text">
                <p>${(d.synopsis || '').replace(/\n+/g,'<br>')}</p>
                <p style="margin-top:16px">
                  <a class="btn" href="./afisha.html">← Повернутися до афіші</a>
                </p>
              </div>
            </div>
          </section>
        `;
        if (target) target.innerHTML = html;
        else document.body.insertAdjacentHTML('beforeend', html);
      })
      .catch(err => {
        console.error(err);
        if (target) target.innerHTML = '<p>Не вдалося завантажити опис вистави.</p>';
      });
  })();
</script>

</body></html>
