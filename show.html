<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Вистава — Ваш Адмін</title>

  <!-- прибираємо favicon 404 -->
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div id="site-header"></div>
  <script type="module" src="./scripts/include.js"></script>

  <main class="main">
    <section class="section">
      <h1 id="show-title">Вистава</h1>
      <p id="show-meta" class="muted"></p>
      <div id="show-poster" style="margin:16px 0"></div>
      <article id="show-description"></article>
    </section>
  </main>

  <div id="site-footer"></div>

  <script>
    const params = new URLSearchParams(location.search);
    const slug = params.get('slug');

    if (!slug) {
      document.getElementById('show-description').textContent = 'Не вказано виставу.';
    } else {
      const DATA_URL = `./data/shows/${slug}.json`;

      fetch(DATA_URL)
        .then(r => {
          if (!r.ok) throw new Error(`Not found: ${DATA_URL}`);
          return r.json();
        })
        .then(data => {
          document.getElementById('show-title').textContent = data.title || 'Вистава';

          const meta = [
            data.theatre === 'shevchenko' ? 'Театр ім. Шевченка' : data.theatre,
            data.stage,
            data.duration_minutes ? `Тривалість — ${data.duration_minutes} хв.` : null
          ].filter(Boolean).join(' • ');
          document.getElementById('show-meta').textContent = meta;

          if (data.poster) {
            document.getElementById('show-poster').innerHTML =
              `<img src="${data.poster}" alt="${data.title}" style="max-width:520px;width:100%;border-radius:16px">`;
          }

          const desc = (data.description || '').replace(/\n/g, '<br>');
          document.getElementById('show-description').innerHTML = desc;
        })
        .catch(err => {
          console.error(err);
          document.getElementById('show-description').textContent =
            'Не вдалося завантажити опис вистави.';
        });
    }
  </script>
</body>
</html>
