<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Вибір місць • Ваш Адмін</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="../afisha.html" class="logo">Ваш Адмін</a>
      <nav class="nav">
        <a href="../afisha.html">Афіша</a>
        <a href="../theatres.html">Театри</a>
        <a href="../contacts.html">Контакти</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="card">
      <h1>Вибір місць</h1>

      <!-- легенда -->
      <div style="margin: 8px 0 16px;">
        <label style="margin-right:16px;">
          <input type="radio" checked disabled /> вільно
        </label>
        <label style="margin-right:16px;">
          <input type="radio" disabled /> вибрано
        </label>
        <label>
          <input type="radio" disabled /> недоступно
        </label>
      </div>

      <!-- СХЕМА ЗАЛУ -->
      <div class="hall-wrapper hall-scroll">
        <div class="hall-inner">
          <div id="hall-stage" class="hall-stage">Сцена</div>
          <div id="hall-rows" class="hall-rows"></div>
        </div>
      </div>

      <!-- Підсумок -->
      <p style="margin-top:8px;">
        Вибрано місць:
        <span id="sel-count">0</span>
        • Сума:
        <span id="sel-sum">0</span> грн
      </p>

      <!-- Форма покупця -->
      <div style="margin-top: 20px;">
        <div class="form-row">
          <div style="flex:1;">
            <label for="buyer-name">Ваше ім’я та прізвище</label>
            <input id="buyer-name" class="form-control" type="text" placeholder="Ваше ім’я та прізвище" />
          </div>
        </div>
        <div class="form-row">
          <div style="flex:1;">
            <label for="buyer-phone">Телефон</label>
            <input id="buyer-phone" class="form-control" type="tel" placeholder="+380..." />
          </div>
        </div>
        <div class="form-row">
          <div style="flex:1;">
            <label for="buyer-email">Електронна пошта (куди надійде PDF-квиток)</label>
            <input id="buyer-email" class="form-control" type="email" placeholder="you@example.com" />
          </div>
        </div>

        <button id="pay-btn" class="button-primary" style="width:100%; margin-top:12px;">
          Перейти до оплати
        </button>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <div>
        <h3>Контакти</h3>
        <p>ФОП Рябов Олександр Германович</p>
        <p>Адреса: Україна, 49100, Дніпро, вул. Мандриківська, 163, кв.27</p>
        <p>Телефон: +380 (68) 516-01-02</p>
        <p>Email: alexandrryabov@ukr.net</p>
      </div>
      <div>
        <h3>Офіційно</h3>
        <p>Реєстраційний номер: 2002240000000166615</p>
        <p>Дата реєстрації: 13.10.2025</p>
        <p>Статус: зареєстровано</p>
        <p><a href="../dogovir.html" style="color:#bfdbfe;">Публічний договір (оферта)</a></p>
      </div>
      <div>
        <h3>Про нас</h3>
        <p>Продаж квитків за ціною каси театру.</p>
        <p>Працюємо з театрами Дніпра та Кривого Рогу.</p>
        <p>Без комісій. Без переплат.</p>
      </div>
    </div>
    <div class="footer-bottom">
      © 2025 Ваш Адмін — театральні квитки
    </div>
  </footer>

  <script>
    // ===== Конфіги залів =====
    const HALL_CONFIG = {
      "shevchenko/za-dvoma-zaytsiamy": {
        name: "Сцена",
        rows: [
          { row: 1, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 170 }] },
          { row: 2, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 200 }] },
          { row: 3, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 200 }] },
          { row: 4, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 180 }] },
          { row: 5, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 180 }] },
          { row: 6, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 180 }] },
          { row: 7, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 170 }] },
          { row: 8, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 170 }] },
          { row: 9, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 160 }] },
          { row: 10, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 160 }] },
          { row: 11, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 140 }] },
          { row: 12, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 140 }] },
          { row: 13, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 120 }] },
          { row: 14, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 120 }] },
          { row: 15, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 100 }] },
          { row: 16, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 100 }] },
          { row: 17, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 70 }] },
          { row: 18, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 70 }] }
        ]
      },

      "academy/chorni-doshky": {
        name: "Сцена",
        rows: [
          { row: 1, seats: 11, offset: 6, aisles: [], zones: [{ from: 1, to: 11, price: 220 }] },

          {
            row: 2, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 160 },
              { from: 7, to: 17, price: 200 },
              { from: 18, to: 23, price: 160 }
            ]
          },
          {
            row: 3, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 160 },
              { from: 7, to: 17, price: 200 },
              { from: 18, to: 23, price: 160 }
            ]
          },
          {
            row: 4, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 160 },
              { from: 7, to: 17, price: 200 },
              { from: 18, to: 23, price: 160 }
            ]
          },
          {
            row: 5, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 160 },
              { from: 7, to: 17, price: 200 },
              { from: 18, to: 23, price: 160 }
            ]
          },
          {
            row: 6, seats: 23, aisles: [6, 17], gapAfter: true, zones: [
              { from: 1, to: 6, price: 160 },
              { from: 7, to: 17, price: 200 },
              { from: 18, to: 23, price: 160 }
            ]
          },

          {
            row: 7, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 150 },
              { from: 7, to: 17, price: 190 },
              { from: 18, to: 23, price: 150 }
            ]
          },

          {
            row: 8, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 140 },
              { from: 7, to: 9, price: 160 },
              { from: 10, to: 14, price: 180 },
              { from: 15, to: 17, price: 160 },
              { from: 18, to: 23, price: 140 }
            ]
          },
          {
            row: 9, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 140 },
              { from: 7, to: 9, price: 160 },
              { from: 10, to: 14, price: 180 },
              { from: 15, to: 17, price: 160 },
              { from: 18, to: 23, price: 140 }
            ]
          },
          {
            row: 10, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 140 },
              { from: 7, to: 9, price: 160 },
              { from: 10, to: 14, price: 180 },
              { from: 15, to: 17, price: 160 },
              { from: 18, to: 23, price: 140 }
            ]
          },
          {
            row: 11, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 140 },
              { from: 7, to: 9, price: 160 },
              { from: 10, to: 14, price: 180 },
              { from: 15, to: 17, price: 160 },
              { from: 18, to: 23, price: 140 }
            ]
          },
          {
            row: 12, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 140 },
              { from: 7, to: 9, price: 160 },
              { from: 10, to: 14, price: 180 },
              { from: 15, to: 17, price: 160 },
              { from: 18, to: 23, price: 140 }
            ]
          },
          {
            row: 13, seats: 23, aisles: [6, 17], zones: [
              { from: 1, to: 6, price: 140 },
              { from: 7, to: 9, price: 160 },
              { from: 10, to: 14, price: 180 },
              { from: 15, to: 17, price: 160 },
              { from: 18, to: 23, price: 140 }
            ]
          },

          { row: 14, seats: 23, aisles: [6, 17], zones: [{ from: 1, to: 23, price: 130 }] },
          { row: 15, seats: 23, aisles: [6, 17], zones: [{ from: 1, to: 23, price: 130 }] },
          { row: 16, seats: 23, aisles: [6, 17], gapAfter: true, zones: [{ from: 1, to: 23, price: 130 }] },
          { row: 17, seats: 23, aisles: [6, 17], gapAfter: true, zones: [{ from: 1, to: 23, price: 120 }] },
          { row: 18, seats: 20, aisles: [10], zones: [{ from: 1, to: 20, price: 110 }] }
        ]
      }
    };

    function getPriceForSeat(rowCfg, seatNum) {
      if (!rowCfg.zones) return 0;
      for (const z of rowCfg.zones) {
        if (seatNum >= z.from && seatNum <= z.to) return z.price;
      }
      return 0;
    }

    function buildHall() {
      const params = new URLSearchParams(window.location.search);
      const key = decodeURIComponent(params.get("show") || "").trim();

      const cfg = HALL_CONFIG[key];
      const rowsBox = document.getElementById("hall-rows");
      const stage = document.getElementById("hall-stage");

      if (!cfg || !rowsBox) {
        stage.textContent = "Схему залу не знайдено";
        return;
      }

      stage.textContent = cfg.name;

      const selected = new Map(); // key -> price
      const selCountEl = document.getElementById("sel-count");
      const selSumEl = document.getElementById("sel-sum");

      function updateSummary() {
        const count = selected.size;
        let sum = 0;
        for (const p of selected.values()) sum += p;
        selCountEl.textContent = count;
        selSumEl.textContent = sum;
      }

      cfg.rows.forEach((rowCfg) => {
        const rowWrap = document.createElement("div");
        rowWrap.className = "hall-row";

        const label = document.createElement("div");
        label.className = "hall-row-label";
        label.textContent = "Ряд " + rowCfg.row;
        rowWrap.appendChild(label);

        const seatsBox = document.createElement("div");
        seatsBox.className = "hall-row-seats";

        if (rowCfg.offset) {
          seatsBox.style.marginLeft = rowCfg.offset * 14 + "px";
        }

        for (let s = 1; s <= rowCfg.seats; s++) {
          const price = getPriceForSeat(rowCfg, s);
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "hall-seat";
          btn.textContent = s;
          btn.dataset.row = rowCfg.row;
          btn.dataset.seat = s;
          btn.dataset.price = price;

          btn.addEventListener("click", () => {
            const key = rowCfg.row + "-" + s;
            if (btn.classList.contains("taken")) return;

            if (btn.classList.contains("selected")) {
              btn.classList.remove("selected");
              selected.delete(key);
            } else {
              btn.classList.add("selected");
              selected.set(key, price);
            }
            updateSummary();
          });

          seatsBox.appendChild(btn);

          if (rowCfg.aisles && rowCfg.aisles.includes(s)) {
            const aisle = document.createElement("div");
            aisle.className = "hall-aisle";
            seatsBox.appendChild(aisle);
          }
        }

        rowWrap.appendChild(seatsBox);
        rowsBox.appendChild(rowWrap);

        if (rowCfg.gapAfter) {
          const gap = document.createElement("div");
          gap.className = "hall-row-gap";
          rowsBox.appendChild(gap);
        }
      });
    }

    document.addEventListener("DOMContentLoaded", buildHall);
  </script>
</body>
</html>
